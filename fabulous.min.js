!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.fabulous=e()}(this,function(){"use strict";function t(t){for(var e=1;t*e%1;)e*=10;return e}function e(e,n,r){(i=arguments.length)<3&&(r=1,2>i&&(n=e,e=0));var s=-1,i=0|Math.max(0,Math.ceil((n-e)/r)),a=t(Math.abs(r)),o=new Array(i);for(e*=a,r*=a;++s<i;)o[s]=(e+s*r)/a;return o}function n(t,e,n){this.h=+t,this.s=+e,this.l=+n}function r(){}function s(t,e,n){this.r=Math.max(0,Math.min(255,Math.round(t))),this.g=Math.max(0,Math.min(255,Math.round(e))),this.b=Math.max(0,Math.min(255,Math.round(n)))}function i(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),isNaN(n)&&(n=0),"#"+(16>t?"0"+t.toString(16):t.toString(16))+(16>e?"0"+e.toString(16):e.toString(16))+(16>n?"0"+n.toString(16):n.toString(16))}function a(t){return c(t>>16&255,t>>8&255,255&t)}function o(t,e,n){this.h=+t,this.s=Math.max(0,Math.min(1,+e)),this.l=Math.max(0,Math.min(1,+n))}function u(t,e,n){return 255*(60>t?e+(n-e)*t/60:180>t?n:240>t?e+(n-e)*(240-t)/60:e)}function l(t,e,n){if(1===arguments.length)if(t instanceof o)n=t.l,e=t.s,t=t.h;else if(t instanceof r||(t=h(t)),t){if(t instanceof o)return t;t=t.rgb();var s=t.r/255,i=t.g/255,a=t.b/255,u=Math.min(s,i,a),l=Math.max(s,i,a),c=l-u;n=(l+u)/2,c?(e=.5>n?c/(l+u):c/(2-l-u),t=s===l?(i-a)/c+6*(a>i):i===l?(a-s)/c+2:(s-i)/c+4,t*=60):(t=NaN,e=n>0&&1>n?0:t)}else t=e=n=NaN;return new o(t,e,n)}function h(t){var e;return t=(t+"").trim().toLowerCase(),(e=Mt.exec(t))?(e=parseInt(e[1],16),c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e)):(e=pt.exec(t))?a(parseInt(e[1],16)):(e=mt.exec(t))?c(e[1],e[2],e[3]):(e=dt.exec(t))?c(2.55*e[1],2.55*e[2],2.55*e[3]):(e=gt.exec(t))?l(e[1],.01*e[2],.01*e[3]):ht.has(t)?a(ht.get(t)):null}function c(t,e,n){return 1===arguments.length&&(t instanceof r||(t=h(t)),t?(t=t.rgb(),n=t.b,e=t.g,t=t.r):t=e=n=NaN),new s(t,e,n)}function f(t,e,r){if(1===arguments.length)if(t instanceof n)r=t.l,e=t.s,t=t.h;else{t instanceof s||(t=c(t));var i=t.r/255,a=t.g/255,o=t.b/255;r=(lt*o+ut*i-ot*a)/(lt+ut-ot);var u=o-r,l=(_*(a-r)-et*u)/tt,h=Math.pow(r,st);e=Math.sqrt(l*l+u*u)/(_*h*(1-h)),t=e?Math.atan2(l,u)*at-120:NaN,0>t&&(t+=360)}return new n(t,e,r)}function g(t,e){return t=+t,e-=t,function(n){return t+e*n}}function d(t,e){var n,r={},s={};for(n in t)n in e?r[n]=v(t[n],e[n]):s[n]=t[n];for(n in e)n in t||(s[n]=e[n]);return function(t){for(n in r)s[n]=r[n](t);return s}}function m(t,e){var n,r=[],s=[],i=t.length,a=e.length,o=Math.min(t.length,e.length);for(n=0;o>n;++n)r.push(v(t[n],e[n]));for(;i>n;++n)s[n]=t[n];for(;a>n;++n)s[n]=e[n];return function(t){for(n=0;o>n;++n)s[n]=r[n](t);return s}}function p(t,e){t=c(t),e=c(e);var n=t.r,r=t.g,s=t.b,a=e.r-n,o=e.g-r,u=e.b-s;return function(t){return i(Math.round(n+a*t),Math.round(r+o*t),Math.round(s+u*t))}}function M(t){return function(){return t}}function b(t){return function(e){return t(e)+""}}function y(t,e){var n,r,s,i=bt.lastIndex=yt.lastIndex=0,a=-1,o=[],u=[];for(t+="",e+="";(n=bt.exec(t))&&(r=yt.exec(e));)(s=r.index)>i&&(s=e.slice(i,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,u.push({i:a,x:g(n,r)})),i=yt.lastIndex;return i<e.length&&(s=e.slice(i),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?b(u[0].x):M(e):(e=u.length,function(t){for(var n,r=0;e>r;++r)o[(n=u[r]).i]=n.x(t);return o.join("")})}function v(t,e){for(var n,r=vt.length;--r>=0&&!(n=vt[r](t,e)););return n}function w(t,e){null==e&&(e=10);var n=t[0],r=t[t.length-1];n>r&&(a=r,r=n,n=a);var s=r-n,i=Math.pow(10,Math.floor(Math.log(s/e)/Math.LN10)),a=s/e/i;return a>=kt?i*=10:a>=xt?i*=5:a>=wt&&(i*=2),[Math.ceil(n/i)*i,Math.floor(r/i)*i+i/2,i]}function x(t,e){if(t=t.slice(),!e)return t;var n,r=0,s=t.length-1,i=t[r],a=t[s];return i>a&&(n=r,r=s,s=n,n=i,i=a,a=n),t[r]=Math.floor(i/e)*e,t[s]=Math.ceil(a/e)*e,t}function k(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function N(t){return t=k(Math.abs(t)),t?t[1]:NaN}function S(t,e){var n=k(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(ft=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+k(t,e+i-1)[0]}function q(t,e){var n=k(t,e);if(!n)return t+"";var r=n[0],s=n[1];return 0>s?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}function A(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,s=1,i=-1;r>s;++s)switch(t[s]){case".":i=n=s;break;case"0":0===i&&(i=s),n=s;break;case"e":break t;default:i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}function j(t){if(!(e=qt.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",s=e[3]||"-",i=e[4]||"",a=!!e[5],o=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),h=e[9]||"";"n"===h?(u=!0,h="g"):St[h]||(h=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=s,this.symbol=i,this.zero=a,this.width=o,this.comma=u,this.precision=l,this.type=h}function $(t){return new j(t)}function E(t){return t}function I(t,e){return function(n,r){for(var s=n.length,i=[],a=0,o=t[0],u=0;s>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),i.push(n.substring(s-=o,s+o)),!((u+=o+1)>r));)o=t[a=(a+1)%t.length];return i.reverse().join(e)}}function P(t){function e(t){t=$(t);var e=t.fill,n=t.align,a=t.sign,o=t.symbol,u=t.zero,l=t.width,h=t.comma,c=t.precision,f=t.type,g="$"===o?s[0]:"#"===o&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",d="$"===o?s[1]:/[%p]/.test(f)?"%":"",m=St[f],p=!f||/[defgprs%]/.test(f);return c=null==c?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,c)):Math.max(0,Math.min(20,c)),function(t){var s=g,o=d;if("c"===f)o=m(t)+o,t="";else{t=+t;var M=(0>t||0>1/t)&&(t*=-1,!0);if(t=m(t,c),s=(M?"("===a?a:"-":"-"===a||"("===a?"":a)+s,o=o+("s"===f?Nt[8+ft/3]:"")+(M&&"("===a?")":""),p)for(var b,y=-1,v=t.length;++y<v;)if(b=t.charCodeAt(y),48>b||b>57){o=(46===b?i+t.slice(y+1):t.slice(y))+o,t=t.slice(0,y);break}}h&&!u&&(t=r(t,1/0));var w=s.length+t.length+o.length,x=l>w?new Array(l-w+1).join(e):"";switch(h&&u&&(t=r(x+t,x.length?l-o.length:1/0),x=""),n){case"<":return s+t+o+x;case"=":return s+x+t+o;case"^":return x.slice(0,w=x.length>>1)+s+t+o+x.slice(w)}return x+s+t+o}}function n(t,n){var r=e((t=$(t),t.type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(N(n)/3))),i=Math.pow(10,-s),a=Nt[8+s/3];return function(t){return r(i*t)+a}}var r=t.grouping&&t.thousands?I(t.grouping,t.thousands):E,s=t.currency,i=t.decimal;return{format:e,formatPrefix:n}}function z(t){return Math.max(0,-N(Math.abs(t)))}function C(t,e){return Math.max(0,N(Math.abs(e))-N(Math.abs(t)))+1}function F(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(N(e)/3)))-N(Math.abs(t)))}function L(t,e,n){var r=w(t,e);if(null==n)n=",."+z(r[2])+"f";else switch(n=$(n),n.type){case"s":var s=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=F(r[2],s)),$t(n,s);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=C(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=z(r[2])-2*("%"===n.type))}return jt(n)}function R(t,n){return e.apply(null,w(t,n))}function X(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function G(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function O(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function T(t,e,n,r){var s=n(t[0],t[1]),i=r(e[0],e[1]);return function(t){return i(s(t))}}function U(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function Y(t){return function(e,n){return U(t(e),n)}}function Z(t){return 1===t.length&&(t=Y(t)),{left:function(e,n,r,s){for(arguments.length<3&&(r=0),arguments.length<4&&(s=e.length);s>r;){var i=r+s>>>1;t(e[i],n)<0?r=i+1:s=i}return r},right:function(e,n,r,s){for(arguments.length<3&&(r=0),arguments.length<4&&(s=e.length);s>r;){var i=r+s>>>1;t(e[i],n)>0?s=i:r=i+1}return r}}}function B(t,e,n,r){var s=Math.min(t.length,e.length)-1,i=new Array(s),a=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)i[o]=n(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(e){var n=Pt(t,e,1,s)-1;return a[n](i[n](e))}}function D(t,e,n,r){function s(){var s=Math.min(t.length,e.length)>2?B:T,u=r?O:G;return a=s(t,e,u,n),o=s(e,t,u,g),i}function i(t){return a(t)}var a,o;return i.invert=function(t){return o(t)},i.domain=function(e){return arguments.length?(t=e.map(Number),s()):t.slice()},i.range=function(t){return arguments.length?(e=t.slice(),s()):e.slice()},i.rangeRound=function(t){return i.range(t).interpolate(X)},i.clamp=function(t){return arguments.length?(r=!!t,s()):r},i.interpolate=function(t){return arguments.length?(n=t,s()):n},i.ticks=function(e){return R(t,e)},i.tickFormat=function(e,n){return L(t,e,n)},i.nice=function(e){return t=x(t,w(t,e)[2]),s()},i.copy=function(){return D(t,e,n,r)},s()}function H(){return D([0,1],[0,1],v,!1)}function J(){function t(){var t=H().domain([0,n]).range([0,360]),s=H().domain([0,1]).range([0,2]),i=s(r),a=function(t){return f(t,i,.5)};e(n).forEach(function(e){console.log("%c       "+a(t(e))+"      ","background: "+a(t(e))+"; color: "+a(t(e))+";")}),console.log("Actually called"),console.log("cycle: ",n)}console.log("init stuff");var n=20,r=0;return t.cycle=function(e){return arguments.length?(n=e,t):n},t}r.prototype={toString:function(){return this.rgb()+""}};var K=n.prototype=new r,Q=.7,V=s.prototype=new r;V.brighter=function(t){return t=null==t?W:Math.pow(W,t),new s(this.r*t,this.g*t,this.b*t)},V.rgb=function(){return this},V.toString=function(){return i(this.r,this.g,this.b)},V.darker=function(t){return t=null==t?Q:Math.pow(Q,t),new s(this.r*t,this.g*t,this.b*t)};var W=1/Q;K.brighter=function(t){return t=null==t?W:Math.pow(W,t),new n(this.h,this.s,this.l*t)},K.darker=function(t){return t=null==t?Q:Math.pow(Q,t),new n(this.h,this.s,this.l*t)};var _=1.97294,tt=-.90649,et=-.29227,nt=1.78277,rt=-.14861,st=1,it=Math.PI/180;K.rgb=function(){var t=isNaN(this.h)?0:(this.h+120)*it,e=Math.pow(this.l,st),n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new s(255*(e+n*(rt*r+nt*i)),255*(e+n*(et*r+tt*i)),255*(e+n*_*r))};var at=180/Math.PI,ot=_*nt,ut=_*tt,lt=nt*et-tt*rt,ht=(new Map).set("aliceblue",15792383).set("antiquewhite",16444375).set("aqua",65535).set("aquamarine",8388564).set("azure",15794175).set("beige",16119260).set("bisque",16770244).set("black",0).set("blanchedalmond",16772045).set("blue",255).set("blueviolet",9055202).set("brown",10824234).set("burlywood",14596231).set("cadetblue",6266528).set("chartreuse",8388352).set("chocolate",13789470).set("coral",16744272).set("cornflowerblue",6591981).set("cornsilk",16775388).set("crimson",14423100).set("cyan",65535).set("darkblue",139).set("darkcyan",35723).set("darkgoldenrod",12092939).set("darkgray",11119017).set("darkgreen",25600).set("darkgrey",11119017).set("darkkhaki",12433259).set("darkmagenta",9109643).set("darkolivegreen",5597999).set("darkorange",16747520).set("darkorchid",10040012).set("darkred",9109504).set("darksalmon",15308410).set("darkseagreen",9419919).set("darkslateblue",4734347).set("darkslategray",3100495).set("darkslategrey",3100495).set("darkturquoise",52945).set("darkviolet",9699539).set("deeppink",16716947).set("deepskyblue",49151).set("dimgray",6908265).set("dimgrey",6908265).set("dodgerblue",2003199).set("firebrick",11674146).set("floralwhite",16775920).set("forestgreen",2263842).set("fuchsia",16711935).set("gainsboro",14474460).set("ghostwhite",16316671).set("gold",16766720).set("goldenrod",14329120).set("gray",8421504).set("green",32768).set("greenyellow",11403055).set("grey",8421504).set("honeydew",15794160).set("hotpink",16738740).set("indianred",13458524).set("indigo",4915330).set("ivory",16777200).set("khaki",15787660).set("lavender",15132410).set("lavenderblush",16773365).set("lawngreen",8190976).set("lemonchiffon",16775885).set("lightblue",11393254).set("lightcoral",15761536).set("lightcyan",14745599).set("lightgoldenrodyellow",16448210).set("lightgray",13882323).set("lightgreen",9498256).set("lightgrey",13882323).set("lightpink",16758465).set("lightsalmon",16752762).set("lightseagreen",2142890).set("lightskyblue",8900346).set("lightslategray",7833753).set("lightslategrey",7833753).set("lightsteelblue",11584734).set("lightyellow",16777184).set("lime",65280).set("limegreen",3329330).set("linen",16445670).set("magenta",16711935).set("maroon",8388608).set("mediumaquamarine",6737322).set("mediumblue",205).set("mediumorchid",12211667).set("mediumpurple",9662683).set("mediumseagreen",3978097).set("mediumslateblue",8087790).set("mediumspringgreen",64154).set("mediumturquoise",4772300).set("mediumvioletred",13047173).set("midnightblue",1644912).set("mintcream",16121850).set("mistyrose",16770273).set("moccasin",16770229).set("navajowhite",16768685).set("navy",128).set("oldlace",16643558).set("olive",8421376).set("olivedrab",7048739).set("orange",16753920).set("orangered",16729344).set("orchid",14315734).set("palegoldenrod",15657130).set("palegreen",10025880).set("paleturquoise",11529966).set("palevioletred",14381203).set("papayawhip",16773077).set("peachpuff",16767673).set("peru",13468991).set("pink",16761035).set("plum",14524637).set("powderblue",11591910).set("purple",8388736).set("rebeccapurple",6697881).set("red",16711680).set("rosybrown",12357519).set("royalblue",4286945).set("saddlebrown",9127187).set("salmon",16416882).set("sandybrown",16032864).set("seagreen",3050327).set("seashell",16774638).set("sienna",10506797).set("silver",12632256).set("skyblue",8900331).set("slateblue",6970061).set("slategray",7372944).set("slategrey",7372944).set("snow",16775930).set("springgreen",65407).set("steelblue",4620980).set("tan",13808780).set("teal",32896).set("thistle",14204888).set("tomato",16737095).set("turquoise",4251856).set("violet",15631086).set("wheat",16113331).set("white",16777215).set("whitesmoke",16119285).set("yellow",16776960).set("yellowgreen",10145074),ct=o.prototype=new r;ct.brighter=function(t){return t=null==t?W:Math.pow(W,t),new o(this.h,this.s,this.l*t)},ct.darker=function(t){return t=null==t?Q:Math.pow(Q,t),new o(this.h,this.s,this.l*t)},ct.rgb=function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=.5>=n?n*(1+e):n+e-n*e,i=2*n-r;return new s(u(t>=240?t-240:t+120,i,r),u(t,i,r),u(120>t?t+240:t-120,i,r))};var ft,gt=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,dt=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,mt=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,pt=/^#([0-9a-f]{6})$/,Mt=/^#([0-9a-f]{3})$/,bt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yt=new RegExp(bt.source,"g"),vt=[function(t,e){var n,r=typeof e;return("string"===r?(n=h(e))?(e=n,p):y:e instanceof h?p:Array.isArray(e)?m:"object"===r&&isNaN(e)?d:g)(t,e)}],wt=Math.sqrt(2),xt=Math.sqrt(10),kt=Math.sqrt(50),Nt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],St={"":A,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return q(100*t,e)},r:q,s:S,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},qt=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;j.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var At=P({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),jt=At.format,$t=At.formatPrefix,Et=Z(U),It=Et.right,Pt=It;return J});