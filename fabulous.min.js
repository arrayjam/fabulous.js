!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.fabulous=e()}(this,function(){"use strict";function t(t,e,n){this.h=+t,this.s=Math.max(0,Math.min(1,+e)),this.l=Math.max(0,Math.min(1,+n))}function e(){}function n(t,e,n){this.r=Math.max(0,Math.min(255,Math.round(t))),this.g=Math.max(0,Math.min(255,Math.round(e))),this.b=Math.max(0,Math.min(255,Math.round(n)))}function r(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),isNaN(n)&&(n=0),"#"+(16>t?"0"+t.toString(16):t.toString(16))+(16>e?"0"+e.toString(16):e.toString(16))+(16>n?"0"+n.toString(16):n.toString(16))}function i(t,e,n){return 255*(60>t?e+(n-e)*t/60:180>t?n:240>t?e+(n-e)*(240-t)/60:e)}function s(t,r,i){return 1===arguments.length&&(t instanceof e||(t=o(t)),t?(t=t.rgb(),i=t.b,r=t.g,t=t.r):t=r=i=NaN),new n(t,r,i)}function a(t){return s(t>>16&255,t>>8&255,255&t)}function o(t){var e;return t=(t+"").trim().toLowerCase(),(e=le.exec(t))?(e=parseInt(e[1],16),s(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e)):(e=he.exec(t))?a(parseInt(e[1],16)):(e=ue.exec(t))?s(e[1],e[2],e[3]):(e=oe.exec(t))?s(2.55*e[1],2.55*e[2],2.55*e[3]):(e=ae.exec(t))?u(e[1],.01*e[2],.01*e[3]):se.has(t)?a(se.get(t)):null}function u(n,r,i){if(1===arguments.length)if(n instanceof t)i=n.l,r=n.s,n=n.h;else if(n instanceof e||(n=o(n)),n){if(n instanceof t)return n;n=n.rgb();var s=n.r/255,a=n.g/255,u=n.b/255,h=Math.min(s,a,u),l=Math.max(s,a,u),c=l-h;i=(l+h)/2,c?(r=.5>i?c/(l+h):c/(2-l-h),n=s===l?(a-u)/c+6*(u>a):a===l?(u-s)/c+2:(s-a)/c+4,n*=60):(n=NaN,r=i>0&&1>i?0:n)}else n=r=i=NaN;return new t(n,r,i)}function h(t,e){return t=+t,e-=t,function(n){return t+e*n}}function l(t,e){var n,r={},i={};for(n in t)n in e?r[n]=m(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function c(t,e){var n,r=[],i=[],s=t.length,a=e.length,o=Math.min(t.length,e.length);for(n=0;o>n;++n)r.push(m(t[n],e[n]));for(;s>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;o>n;++n)i[n]=r[n](t);return i}}function f(t,e){t=s(t),e=s(e);var n=t.r,i=t.g,a=t.b,o=e.r-n,u=e.g-i,h=e.b-a;return function(t){return r(Math.round(n+o*t),Math.round(i+u*t),Math.round(a+h*t))}}function g(t){return function(){return t}}function p(t){return function(e){return t(e)+""}}function d(t,e){var n,r,i,s=ce.lastIndex=fe.lastIndex=0,a=-1,o=[],u=[];for(t+="",e+="";(n=ce.exec(t))&&(r=fe.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),o[a]?o[a]+=i:o[++a]=i),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,u.push({i:a,x:h(n,r)})),s=fe.lastIndex;return s<e.length&&(i=e.slice(s),o[a]?o[a]+=i:o[++a]=i),o.length<2?u[0]?p(u[0].x):g(e):(e=u.length,function(t){for(var n,r=0;e>r;++r)o[(n=u[r]).i]=n.x(t);return o.join("")})}function m(t,e){for(var n,r=ge.length;--r>=0&&!(n=ge[r](t,e)););return n}function v(t,e){null==e&&(e=10);var n=t[0],r=t[t.length-1];n>r&&(a=r,r=n,n=a);var i=r-n,s=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=i/e/s;return a>=me?s*=10:a>=de?s*=5:a>=pe&&(s*=2),[Math.ceil(n/s)*s,Math.floor(r/s)*s+s/2,s]}function y(t,e){if(t=t.slice(),!e)return t;var n,r=0,i=t.length-1,s=t[r],a=t[i];return s>a&&(n=r,r=i,i=n,n=s,s=a,a=n),t[r]=Math.floor(s/e)*e,t[i]=Math.ceil(a/e)*e,t}function _(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function w(t){return t=_(Math.abs(t)),t?t[1]:NaN}function b(t,e){var n=_(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ie=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+_(t,e+s-1)[0]}function M(t,e){var n=_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return 0>i?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function x(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,s=-1;r>i;++i)switch(t[i]){case".":s=n=i;break;case"0":0===s&&(s=i),n=i;break;case"e":break t;default:s>0&&(s=0)}return s>0?t.slice(0,s)+t.slice(n+1):t}function k(t){if(!(e=_e.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",s=e[4]||"",a=!!e[5],o=e[6]&&+e[6],u=!!e[7],h=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):ye[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=a,this.width=o,this.comma=u,this.precision=h,this.type=l}function N(t){return new k(t)}function A(t){return t}function S(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),s.push(n.substring(i-=o,i+o)),!((u+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function E(t){function e(t){t=N(t);var e=t.fill,n=t.align,a=t.sign,o=t.symbol,u=t.zero,h=t.width,l=t.comma,c=t.precision,f=t.type,g="$"===o?i[0]:"#"===o&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",p="$"===o?i[1]:/[%p]/.test(f)?"%":"",d=ye[f],m=!f||/[defgprs%]/.test(f);return c=null==c?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,c)):Math.max(0,Math.min(20,c)),function(t){var i=g,o=p;if("c"===f)o=d(t)+o,t="";else{t=+t;var v=(0>t||0>1/t)&&(t*=-1,!0);if(t=d(t,c),i=(v?"("===a?a:"-":"-"===a||"("===a?"":a)+i,o=o+("s"===f?ve[8+ie/3]:"")+(v&&"("===a?")":""),m)for(var y,_=-1,w=t.length;++_<w;)if(y=t.charCodeAt(_),48>y||y>57){o=(46===y?s+t.slice(_+1):t.slice(_))+o,t=t.slice(0,_);break}}l&&!u&&(t=r(t,1/0));var b=i.length+t.length+o.length,M=h>b?new Array(h-b+1).join(e):"";switch(l&&u&&(t=r(M+t,M.length?h-o.length:1/0),M=""),n){case"<":return i+t+o+M;case"=":return i+M+t+o;case"^":return M.slice(0,b=M.length>>1)+i+t+o+M.slice(b)}return M+i+t+o}}function n(t,n){var r=e((t=N(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(w(n)/3))),s=Math.pow(10,-i),a=ve[8+i/3];return function(t){return r(s*t)+a}}var r=t.grouping&&t.thousands?S(t.grouping,t.thousands):A,i=t.currency,s=t.decimal;return{format:e,formatPrefix:n}}function q(t){return Math.max(0,-w(Math.abs(t)))}function C(t,e){return Math.max(0,w(Math.abs(e))-w(Math.abs(t)))+1}function $(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(w(e)/3)))-w(Math.abs(t)))}function j(t,e,n){var r=v(t,e);if(null==n)n=",."+q(r[2])+"f";else switch(n=N(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=$(r[2],i)),Me(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=C(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=q(r[2])-2*("%"===n.type))}return be(n)}function z(t){for(var e=1;t*e%1;)e*=10;return e}function P(t,e,n){(i=arguments.length)<3&&(n=1,2>i&&(e=t,t=0));var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),s=z(Math.abs(n)),a=new Array(i);for(t*=s,n*=s;++r<i;)a[r]=(t+r*n)/s;return a}function I(t,e){return P.apply(null,v(t,e))}function L(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function D(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function F(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function T(t,e,n,r){var i=n(t[0],t[1]),s=r(e[0],e[1]);return function(t){return s(i(t))}}function R(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function B(t){return function(e,n){return R(t(e),n)}}function O(t){return 1===t.length&&(t=B(t)),{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var s=r+i>>>1;t(e[s],n)<0?r=s+1:i=s}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var s=r+i>>>1;t(e[s],n)>0?i=s:r=s+1}return r}}}function U(t,e,n,r){var i=Math.min(t.length,e.length)-1,s=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)s[o]=n(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(e){var n=Ne(t,e,1,i)-1;return a[n](s[n](e))}}function X(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?U:T,u=r?F:D;return a=i(t,e,u,n),o=i(e,t,u,h),s}function s(t){return a(t)}var a,o;return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),i()):t.slice()},s.range=function(t){return arguments.length?(e=t.slice(),i()):e.slice()},s.rangeRound=function(t){return s.range(t).interpolate(L)},s.clamp=function(t){return arguments.length?(r=!!t,i()):r},s.interpolate=function(t){return arguments.length?(n=t,i()):n},s.ticks=function(e){return I(t,e)},s.tickFormat=function(e,n){return j(t,e,n)},s.nice=function(e){return t=y(t,v(t,e)[2]),i()},s.copy=function(){return X(t,e,n,r)},i()}function H(){return X([0,1],[0,1],m,!1)}function V(t,e,n){this.h=+t,this.c=+e,this.l=+n}function G(t,e,n){this.l=+t,this.a=+e,this.b=+n}function Y(t){return 255*(.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Z(t){return t>Ce?t*t*t:$e*(t-qe)}function J(t){return t>Ie?Math.pow(t,1/3):t/$e+qe}function K(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Q(t,e,r){if(1===arguments.length)if(t instanceof G)r=t.b,e=t.a,t=t.l;else if(t instanceof V){var i=t.h*Le;r=Math.sin(i)*t.c,e=Math.cos(i)*t.c,t=t.l}else{t instanceof n||(t=s(t));var a=K(t.r),o=K(t.g),r=K(t.b),u=J((.4124564*a+.3575761*o+.1804375*r)/ze),h=J((.2126729*a+.7151522*o+.072175*r)/Pe),l=J((.0193339*a+.119192*o+.9503041*r)/je);r=200*(h-l),e=500*(u-h),t=116*h-16}return new G(t,e,r)}function W(t,e,n){return 1===arguments.length&&(t instanceof V?(n=t.l,e=t.c,t=t.h):(t instanceof G||(t=Q(t)),n=t.l,e=Math.sqrt(t.a*t.a+t.b*t.b),t=Math.atan2(t.b,t.a)*De,0>t&&(t+=360))),new V(t,e,n)}function tt(t,e,n){this.h=+t,this.s=+e,this.l=+n}function et(t,e,r){if(1===arguments.length)if(t instanceof tt)r=t.l,e=t.s,t=t.h;else{t instanceof n||(t=s(t));var i=t.r/255,a=t.g/255,o=t.b/255;r=(Ge*o+Ve*i-He*a)/(Ge+Ve-He);var u=o-r,h=(Te*(a-r)-Be*u)/Re,l=Math.pow(r,Xe);e=Math.sqrt(h*h+u*u)/(Te*l*(1-l)),t=e?Math.atan2(h,u)*De-120:NaN,0>t&&(t+=360)}return new tt(t,e,r)}function nt(t,e){this._root=t,this._depth=e,this._enter=this._update=this._exit=null}function rt(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function it(t,e,n){var r=rt(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function st(t,e){function n(){return it(this,t,e)}function r(){return it(this,t,e.apply(this,arguments))}return this.each("function"==typeof e?r:n)}function at(){}function ot(t){return t.replace(Ye,"\\$&")}function ut(t){return function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t(e)}}function ht(t,e,n){return function(r){for(var i=e.length,s=Ze;--i>=0;)n[i<<1]=e[i].__data__;Ze=r;try{t.apply(e[0],n)}finally{Ze=s}}}function lt(t,e,n){function r(){for(var r=h,s=arguments.length>>1,o=new Array(s);--s>=0;)r=r[arguments[(s<<1)+1]],o[s]=s?r._parent:r;var l=ht(e,o,arguments);a&&(l=ut(l)),i.call(this),this.addEventListener(t,this[u]=l,l._capture=n),l._listener=e}function i(){var e=this[u];e&&(this.removeEventListener(t,e,e._capture),delete this[u])}function s(){var e,n=new RegExp("^__on([^.]+)"+ot(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i._capture),delete this[r]}}var a,o=arguments.length,u="__on"+t,h=this._root;return 2>o?(o=this.node()[u])&&o._listener:(3>o&&(n=!1),(o=t.indexOf("."))>0&&(t=t.slice(0,o)),(a=Je.has(t))&&(t=Je.get(t)),this.each(e?o?r:at:o?i:s))}function ct(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ft(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})}function gt(t){return function(){return this.querySelector(t)}}function pt(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Qe.has(n)?{space:Qe.get(n),local:t}:t}function dt(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return t=pt(t),t.local?n:e}function mt(t,e){function n(){return this.appendChild(t.apply(this,arguments))}function r(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}return"function"!=typeof t&&(t=dt(t)),this.select(arguments.length<2?n:("function"!=typeof e&&(e=gt(e)),r))}function vt(t){function e(){this.innerHTML=t}function n(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?n:e)):this.node().innerHTML}function yt(t){function e(){this.textContent=t}function n(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?n:e)):this.node().textContent}function _t(t){return t.trim().replace(/\s+/g," ")}function wt(t){var e;return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);e||(e=new RegExp("(?:^|\\s+)"+ot(t)+"(?:\\s+|$)","g"));var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",_t(i+" "+t))):n.setAttribute("class",_t(i.replace(e," ")))}}function bt(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=(t+"").trim().split(/^|\s+/);var i=t.length;if(arguments.length<2){var s=this.node(),a=-1;if(e=s.classList){for(;++a<i;)if(!e.contains(t[a]))return!1}else for(e=s.getAttribute("class");++a<i;)if(!classedRe(t[a]).test(e))return!1;return!0}return t=t.map(wt),this.each("function"==typeof e?r:n)}function Mt(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return arguments.length<2?this.node()[t]:this.each(null==e?n:"function"==typeof e?i:r)}function xt(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function s(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}var a=arguments.length;return 2>a?rt(a=this.node()).getComputedStyle(a,null).getPropertyValue(t):(3>a&&(n=""),this.each(null==e?r:"function"==typeof e?s:i))}function kt(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function s(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}if(t=pt(t),arguments.length<2){var u=this.node();return t.local?u.getAttributeNS(t.space,t.local):u.getAttribute(t)}return this.each(null==e?t.local?r:n:"function"==typeof e?t.local?o:a:t.local?s:i)}function Nt(t){function e(n,i){var s,a=-1,o=n.length;if(--i)for(var u=2*i,h=u+1;++a<o;)(s=n[a])&&(r[u]=s._parent.__data__,r[h]=a,e(s,i));else for(;++a<o;)(s=n[a])&&(r[0]=s.__data__,r[1]=a,t.apply(s,r))}var n=this._depth,r=new Array(n);return e(this._root,n),this}function At(){return!this.node()}function St(){var t=0;return this.each(function(){++t}),t}function Et(t,e){var n,r=-1,i=t.length;if(--e){for(;++r<i;)if((n=t[r])&&(n=Et(n,e)))return n}else for(;++r<i;)if(n=t[r])return n}function qt(){return Et(this._root,this._depth)}function Ct(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function $t(){var t=arguments[0];return t.apply(arguments[0]=this,arguments),this}function jt(t,e){var n,r=-1,i=t.length;if(--e)for(;++r<i;)(n=t[r])&&(t[r]=jt(n,e));else if(!Array.isArray(t)){for(var s=new Array(i);++r<i;)s[r]=t[r];s._parent=t._parent,t=s}return t}function zt(t){return t._root=jt(t._root,t._depth)}function Pt(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function It(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}function n(t,r){if(--r)for(var i,s=-1,a=t.length;++s<a;)(i=t[s])&&n(i,r);else t.sort(e)}return t||(t=Pt),n(zt(this),this._depth),this.order()}function Lt(t,e){var n,r,i=t.length;if(--e)for(;--i>=0;)(n=t[i])&&Lt(n,e);else for(r=t[--i];--i>=0;)(n=t[i])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n)}function Dt(){return Lt(this._root,this._depth),this}function Ft(t,e){var n,r=-1,i=t.length,s=new Array(i);if(--e)for(;++r<i;)(n=t[r])&&(s[r]=Ft(n,e));return s._parent=t._parent,s}function Tt(t){return new nt(Ft(zt(t),t._depth),t._depth)}function Rt(){return this._exit||(this._exit=Tt(this))}function Bt(){return this._enter||(this._enter=Tt(this),this._enter._update=this),this._enter}function Ot(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Ut(t){return function(){return t}}function Xt(t,e){function n(e,r,i,s){var a,o,l=-1;if(s--){var c=2*s,f=c+1;for(a=e.length;++l<a;)(o=e[l])&&(u[c]=o._parent.__data__,u[f]=l,n(o,r[l],i[l],s))}else{var g,p=0;for(h(e,r,i,t.apply(e._parent,u)),a=e.length;++l<a;)if(g=r[l]){for(l>=p&&(p=l+1);!(o=e[p])&&++p<a;);g._next=o||null}}}function r(t,e,n,r){var i,s=0,a=t.length,o=r.length,u=Math.min(a,o);for(e.length=0,e.length=o,n.length=0,n.length=a;u>s;++s)(i=t[s])?i.__data__=r[s]:e[s]=new Ot(t._parent,r[s]);for(;o>s;++s)e[s]=new Ot(t._parent,r[s]);for(;a>s;++s)(i=t[s])&&(n[s]=t[s]);t.length=o}function i(t,n,r,i){var s,a,o,h=i.length,l=t.length,c=new Map,f=new Array(2).concat(u),g=new Array(l);for(n.length=0,n.length=h,r.length=0,r.length=l,s=0;l>s;++s)(a=t[s])&&(f[0]=a.__data__,f[1]=s,g[s]=o=e.apply(a,f),c.has(o)?r[s]=a:c.set(o,a));for(t.length=0,t.length=h,s=0;h>s;++s)f[0]=i[s],f[1]=s,o=e.apply(t._parent,f),(a=c.get(o))?a!==!0&&(t[s]=a,a.__data__=i[s]):n[s]=new Ot(t._parent,i[s]),c.set(o,!0);for(s=0;l>s;++s)(a=c.get(g[s]))!==!0&&(r[s]=a)}if(!t){var s=new Array(this.size()),a=-1;return this.each(function(t){s[++a]=t}),s}var o=this._depth-1,u=new Array(2*o),h=e?i:r;return"function"!=typeof t&&(t=Ut(t)),n(this._root,this.enter()._root,this.exit()._root,o),this}function Ht(t){function e(n,i){var s,a,o=-1,u=n.length;if(--i){var h=2*i,l=h+1;for(a=new Array(u);++o<u;)(s=n[o])&&(r[h]=s._parent.__data__,r[l]=o,a[o]=e(s,i))}else for(a=[];++o<u;)(s=n[o])&&(r[0]=s.__data__,r[1]=o,t.apply(s,r)&&a.push(s));return a._parent=n._parent,a}var n=this._depth,r=new Array(2*n);return"function"!=typeof t&&(t=We(t)),new nt(e(this._root,n),n)}function Vt(t){return function(){return this.querySelectorAll(t)}}function Gt(t){function e(n,i){var s,a,o=-1,u=n.length,h=new Array(u);if(--i)for(var l=2*i,c=l+1;++o<u;)(s=n[o])&&(r[l]=s._parent.__data__,r[c]=o,h[o]=e(s,i));else for(;++o<u;)(s=n[o])&&(r[0]=s.__data__,r[1]=o,h[o]=a=t.apply(s,r),a._parent=s);return h._parent=n._parent,h}var n=this._depth,r=new Array(2*n);return"function"!=typeof t&&(t=Vt(t)),new nt(e(this._root,n),n+1)}function Yt(t){function e(n,i,s){var a,o,u=-1,h=n.length,l=new Array(h);if(--s)for(var c=2*s,f=c+1;++u<h;)(a=n[u])&&(r[c]=a._parent.__data__,r[f]=u,l[u]=e(a,i&&i[u],s));else for(;++u<h;)(a=n[u])&&(r[0]=a.__data__,r[1]=u,(o=t.apply(a,r))&&("__data__"in a&&(o.__data__=a.__data__),i&&(i[u]=o,delete n[u]),l[u]=o));return l._parent=n._parent,l}var n=this._depth,r=new Array(2*n);return"function"!=typeof t&&(t=gt(t)),new nt(e(this._root,this._update&&this._update._root,n),n)}function Zt(){return new nt([document.documentElement],1)}function Jt(t){return new nt(["string"==typeof t?document.querySelector(t):t],1)}function Kt(t){return new nt("string"==typeof t?document.querySelectorAll(t):t,1)}function Qt(){function t(t){function l(t,e){var n=H().domain([0,t]).range([0,360]),r=H().domain([0,1]).range([0,2])(e);return function(t){return et(n(t),r,.5)}}function c(t,e){var n=H().domain([0,t]).range([0,360]),r=H().domain([0,1]).range([0,100])(e);return function(t){return W(n(t),r,75)}}function f(t,e){var n=H().domain([0,t]).range([0,360]),r=H().domain([0,1]).range([0,1])(e);return function(t){return u(n(t),r,.5)}}function g(){var t=["#E40303","#FF8C00","#FFED00","#008026","#004DFF","#750787"];return function(e){return t[e]}}function p(t,e){return t.unshift.apply(t,t.splice(e,t.length)),t}function d(t){console.log("%c       "+t+"      ","background: "+t+"; color: "+t+";")}function m(t,e,n,r){function i(t,e,n){var r=a(t);return n&&r.push("text-shadow: 0 0 40px "+t),"."+e+"::selection { "+r.join("; ")+" }"}function s(t,e,n){var r=a(t);return n&&r.push("text-shadow: 0 0 5px "+t),"."+e+"::-moz-selection { "+r.join("; ")+" }"}function a(t){return["background-color: transparent","color: "+t]}var o=[];return t.forEach(function(t,n){var a=r+n.toString();o.push(i(t,a,e)),o.push(s(t,a,e))}),n&&(o.push("::selection { background-color: transparent; }"),o.push("::-moz-selection { background-color: transparent; }")),o.join("\n")}void 0!==Wt&&Wt++,console.log("instanceIndex",Wt),i%=e;var v;"cubehelix"===n?v=l(e,r):"hcl"===n?v=c(e,r):"hsl"===n?v=f(e,r):"pride"===n?(v=g(),e=6):(console.log("Style "+n+' not found. Defaulting to "hcl"'),v=c(e,r));var y=p(P(e).map(v),i);h&&y.forEach(d);var _="fabulous-"+Wt+"-";Jt("body").append("style")["class"](a,!0).html(m(y,s,o,_));var w=[],b=Kt(t);console.log(b.nodes(),b.size()),b.each(function(){Jt(this).selectAll("*").each(function(){w.push(this)})}),console.log(w),Kt(w).filter(function(){return 0===this.childElementCount||Array.prototype.slice.call(this.childNodes).some(function(t){return t.nodeType===Node.TEXT_NODE})||"inline"!==getComputedStyle(this).display}).each(function(t,n){var r=_+(n%e).toString();Jt(this)["class"](r,!0)})}console.log("init stuff");var e=10,n="hcl",r=.8,i=86,s=!0,a="fabulous-styles",o=!0,h=!0;return t.style=function(e){return arguments.length?(n=e,t):n},t.cycle=function(n){return arguments.length?(e=n,t):e},t.intensity=function(e){return arguments.length?(r=e,t):r},t.rotation=function(e){return arguments.length?(i=e,t):i},t.glow=function(e){return arguments.length?(s=e,t):s},t.styleTagClass=function(e){return arguments.length?(a=e,t):a},t.disableOtherSelectionStyles=function(e){return arguments.length?(o=e,t):o},t.preview=function(e){return arguments.length?(h=e,t):h},t}var Wt=0;e.prototype={toString:function(){return this.rgb()+""}};var te=t.prototype=new e,ee=.7,ne=n.prototype=new e;ne.brighter=function(t){return t=null==t?re:Math.pow(re,t),new n(this.r*t,this.g*t,this.b*t)},ne.rgb=function(){return this},ne.toString=function(){return r(this.r,this.g,this.b)},ne.darker=function(t){return t=null==t?ee:Math.pow(ee,t),new n(this.r*t,this.g*t,this.b*t)};var re=1/ee;te.brighter=function(e){return e=null==e?re:Math.pow(re,e),new t(this.h,this.s,this.l*e)},te.darker=function(e){return e=null==e?ee:Math.pow(ee,e),new t(this.h,this.s,this.l*e)},te.rgb=function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=.5>=r?r*(1+e):r+e-r*e,a=2*r-s;return new n(i(t>=240?t-240:t+120,a,s),i(t,a,s),i(120>t?t+240:t-120,a,s))};var ie,se=(new Map).set("aliceblue",15792383).set("antiquewhite",16444375).set("aqua",65535).set("aquamarine",8388564).set("azure",15794175).set("beige",16119260).set("bisque",16770244).set("black",0).set("blanchedalmond",16772045).set("blue",255).set("blueviolet",9055202).set("brown",10824234).set("burlywood",14596231).set("cadetblue",6266528).set("chartreuse",8388352).set("chocolate",13789470).set("coral",16744272).set("cornflowerblue",6591981).set("cornsilk",16775388).set("crimson",14423100).set("cyan",65535).set("darkblue",139).set("darkcyan",35723).set("darkgoldenrod",12092939).set("darkgray",11119017).set("darkgreen",25600).set("darkgrey",11119017).set("darkkhaki",12433259).set("darkmagenta",9109643).set("darkolivegreen",5597999).set("darkorange",16747520).set("darkorchid",10040012).set("darkred",9109504).set("darksalmon",15308410).set("darkseagreen",9419919).set("darkslateblue",4734347).set("darkslategray",3100495).set("darkslategrey",3100495).set("darkturquoise",52945).set("darkviolet",9699539).set("deeppink",16716947).set("deepskyblue",49151).set("dimgray",6908265).set("dimgrey",6908265).set("dodgerblue",2003199).set("firebrick",11674146).set("floralwhite",16775920).set("forestgreen",2263842).set("fuchsia",16711935).set("gainsboro",14474460).set("ghostwhite",16316671).set("gold",16766720).set("goldenrod",14329120).set("gray",8421504).set("green",32768).set("greenyellow",11403055).set("grey",8421504).set("honeydew",15794160).set("hotpink",16738740).set("indianred",13458524).set("indigo",4915330).set("ivory",16777200).set("khaki",15787660).set("lavender",15132410).set("lavenderblush",16773365).set("lawngreen",8190976).set("lemonchiffon",16775885).set("lightblue",11393254).set("lightcoral",15761536).set("lightcyan",14745599).set("lightgoldenrodyellow",16448210).set("lightgray",13882323).set("lightgreen",9498256).set("lightgrey",13882323).set("lightpink",16758465).set("lightsalmon",16752762).set("lightseagreen",2142890).set("lightskyblue",8900346).set("lightslategray",7833753).set("lightslategrey",7833753).set("lightsteelblue",11584734).set("lightyellow",16777184).set("lime",65280).set("limegreen",3329330).set("linen",16445670).set("magenta",16711935).set("maroon",8388608).set("mediumaquamarine",6737322).set("mediumblue",205).set("mediumorchid",12211667).set("mediumpurple",9662683).set("mediumseagreen",3978097).set("mediumslateblue",8087790).set("mediumspringgreen",64154).set("mediumturquoise",4772300).set("mediumvioletred",13047173).set("midnightblue",1644912).set("mintcream",16121850).set("mistyrose",16770273).set("moccasin",16770229).set("navajowhite",16768685).set("navy",128).set("oldlace",16643558).set("olive",8421376).set("olivedrab",7048739).set("orange",16753920).set("orangered",16729344).set("orchid",14315734).set("palegoldenrod",15657130).set("palegreen",10025880).set("paleturquoise",11529966).set("palevioletred",14381203).set("papayawhip",16773077).set("peachpuff",16767673).set("peru",13468991).set("pink",16761035).set("plum",14524637).set("powderblue",11591910).set("purple",8388736).set("rebeccapurple",6697881).set("red",16711680).set("rosybrown",12357519).set("royalblue",4286945).set("saddlebrown",9127187).set("salmon",16416882).set("sandybrown",16032864).set("seagreen",3050327).set("seashell",16774638).set("sienna",10506797).set("silver",12632256).set("skyblue",8900331).set("slateblue",6970061).set("slategray",7372944).set("slategrey",7372944).set("snow",16775930).set("springgreen",65407).set("steelblue",4620980).set("tan",13808780).set("teal",32896).set("thistle",14204888).set("tomato",16737095).set("turquoise",4251856).set("violet",15631086).set("wheat",16113331).set("white",16777215).set("whitesmoke",16119285).set("yellow",16776960).set("yellowgreen",10145074),ae=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,oe=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,ue=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,he=/^#([0-9a-f]{6})$/,le=/^#([0-9a-f]{3})$/,ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fe=new RegExp(ce.source,"g"),ge=[function(t,e){var n,r=typeof e;return("string"===r?(n=o(e))?(e=n,f):d:e instanceof o?f:Array.isArray(e)?c:"object"===r&&isNaN(e)?l:h)(t,e)}],pe=Math.sqrt(2),de=Math.sqrt(10),me=Math.sqrt(50),ve=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],ye={"":x,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return M(100*t,e)},r:M,s:b,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},_e=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;k.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var we=E({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),be=we.format,Me=we.formatPrefix,xe=O(R),ke=xe.right,Ne=ke,Ae=V.prototype=new e,Se=18;Ae.brighter=function(t){return new V(this.h,this.c,this.l+Se*(null==t?1:t))},Ae.darker=function(t){return new V(this.h,this.c,this.l-Se*(null==t?1:t))};var Ee=G.prototype=new e;Ee.brighter=function(t){return new G(this.l+Se*(null==t?1:t),this.a,this.b)},Ee.darker=function(t){return new G(this.l-Se*(null==t?1:t),this.a,this.b)};var qe=4/29,Ce=6/29,$e=3*Ce*Ce,je=1.08883,ze=.95047,Pe=1;Ee.rgb=function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return t=Pe*Z(t),e=ze*Z(e),r=je*Z(r),new n(Y(3.2404542*e-1.5371385*t-.4985314*r),Y(-.969266*e+1.8760108*t+.041556*r),Y(.0556434*e-.2040259*t+1.0572252*r))};var Ie=Ce*Ce*Ce,Le=Math.PI/180;Ae.rgb=function(){return Q(this).rgb()};var De=180/Math.PI,Fe=tt.prototype=new e;Fe.brighter=function(t){return t=null==t?re:Math.pow(re,t),new tt(this.h,this.s,this.l*t)},Fe.darker=function(t){return t=null==t?ee:Math.pow(ee,t),new tt(this.h,this.s,this.l*t)};var Te=1.97294,Re=-.90649,Be=-.29227,Oe=1.78277,Ue=-.14861,Xe=1;Fe.rgb=function(){var t=isNaN(this.h)?0:(this.h+120)*Le,e=Math.pow(this.l,Xe),r=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),s=Math.sin(t);return new n(255*(e+r*(Ue*i+Oe*s)),255*(e+r*(Be*i+Re*s)),255*(e+r*Te*i))};var He=Te*Oe,Ve=Te*Re,Ge=Oe*Be-Re*Ue,Ye=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ze=null,Je=new Map;if("undefined"!=typeof document){var Ke=document.documentElement;"onmouseenter"in Ke||Je.set("mouseenter","mouseover").set("mouseleave","mouseout")}var Qe=(new Map).set("svg","http://www.w3.org/2000/svg").set("xhtml","http://www.w3.org/1999/xhtml").set("xlink","http://www.w3.org/1999/xlink").set("xml","http://www.w3.org/XML/1998/namespace").set("xmlns","http://www.w3.org/2000/xmlns/");Ot.prototype={appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e||this._next)}};var We=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var tn=document.documentElement;if(!tn.matches){var en=tn.webkitMatchesSelector||tn.msMatchesSelector||tn.mozMatchesSelector||tn.oMatchesSelector;We=function(t){return function(){return en.call(this,t)}}}}return nt.prototype=Zt.prototype={select:Yt,selectAll:Gt,filter:Ht,data:Xt,enter:Bt,exit:Rt,order:Dt,sort:It,call:$t,nodes:Ct,node:qt,size:St,empty:At,each:Nt,attr:kt,style:xt,property:Mt,"class":bt,classed:bt,text:yt,html:vt,append:mt,insert:mt,remove:ft,datum:ct,event:lt,on:lt,dispatch:st},Qt});